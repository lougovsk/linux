#!/bin/sh
# SPDX-License-Identifier: GPL-2.0
# description: Test trace remote buffer size
# requires: remotes/test

. $TEST_DIR/remotes/functions

test_buffer_size()
{
    echo 0 > tracing_on
    assert_unloaded

    echo 4096 > buffer_size_kb
    echo 1 > tracing_on
    assert_loaded

    echo 0 > tracing_on
    echo 7 > buffer_size_kb
}

if [ -z "$SOURCE_REMOTE_TEST" ]; then
    set -e
    setup_remote_test
    test_buffer_size
fi
