# SPDX-License-Identifier: GPL-2.0

setup_remote()
{
	local name=$1

	[ -e $TRACING_DIR/remotes/$name/write_event ] || exit_unresolved

	cd remotes/$name/
	echo 0 > tracing_on
	clear_trace
	echo 7 > buffer_size_kb
	echo 0 > events/enable
	echo 1 > events/$name/selftest/enable
	echo 1 > tracing_on
}

setup_remote_test()
{
	[ -d $TRACING_DIR/remotes/test/ ] || modprobe remote_test || exit_unresolved

	setup_remote "test"
}

assert_loaded()
{
	grep -q "(loaded)" buffer_size_kb
}

assert_unloaded()
{
	grep -q "(unloaded)" buffer_size_kb
}
